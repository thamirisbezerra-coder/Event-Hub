<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event Hub - Doremus</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Fontes -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'sans-serif'] },
                    colors: {
                        brand: { 
                            navy: '#0f172a', 
                            blue: '#2563eb', 
                            light: '#f1f5f9' 
                        }
                    },
                    boxShadow: {
                        'soft': '0 4px 20px -2px rgba(0, 0, 0, 0.05)',
                        'card': '0 0 0 1px rgba(0,0,0,0.03), 0 2px 8px rgba(0,0,0,0.04)',
                    }
                }
            }
        }
    </script>

    <style>
        body { background-color: #f8fafc; color: #334155; }
        .hide-scroll::-webkit-scrollbar { display: none; }
        .animate-fade-in { animation: fadeIn 0.3s ease-out; }
        .animate-slide-up { animation: slideUp 0.3s ease-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        /* Status Colors */
        .status-verde { background-color: #dcfce7; color: #166534; border: 1px solid #bbf7d0; }
        .status-amarelo { background-color: #fef9c3; color: #854d0e; border: 1px solid #fde047; }
        .status-vermelho { background-color: #fee2e2; color: #991b1b; border: 1px solid #fecaca; }
    </style>
</head>
<body class="antialiased">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo, useRef } = React;

        // --- ICON SYSTEM (HARDCODED FOR STABILITY) ---
        const ICONS = {
            // UI Icons
            Plus: <path d="M5 12h14M12 5v14" />,
            X: <path d="M18 6 6 18M6 6l12 12" />,
            Check: <path d="M20 6 9 17l-5-5" />,
            Search: <React.Fragment><circle cx="11" cy="11" r="8" /><path d="m21 21-4.3-4.3" /></React.Fragment>,
            Bell: <React.Fragment><path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9" /><path d="M10.3 21a1.94 1.94 0 0 0 3.4 0" /></React.Fragment>,
            ArrowLeft: <React.Fragment><path d="m12 19-7-7 7-7" /><path d="M19 12H5" /></React.Fragment>,
            Camera: <React.Fragment><path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z" /><circle cx="12" cy="13" r="3" /></React.Fragment>,
            Edit: <path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z" />,
            Trash2: <React.Fragment><path d="M3 6h18" /><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6" /><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2" /><line x1="10" x2="10" y1="11" y2="17" /><line x1="14" x2="14" y1="11" y2="17" /></React.Fragment>,
            Paperclip: <path d="m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48" />,
            Link: <React.Fragment><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" /><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" /></React.Fragment>,
            Users: <React.Fragment><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" /><circle cx="9" cy="7" r="4" /><path d="M22 21v-2a4 4 0 0 0-3-3.87" /><path d="M16 3.13a4 4 0 0 1 0 7.75" /></React.Fragment>,
            BarChart3: <React.Fragment><path d="M3 3v18h18" /><path d="M18 17V9" /><path d="M13 17V5" /><path d="M8 17v-3" /></React.Fragment>,
            Clock: <React.Fragment><circle cx="12" cy="12" r="10" /><polyline points="12 6 12 12 16 14" /></React.Fragment>,
            AlertTriangle: <React.Fragment><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z" /><line x1="12" x2="12" y1="9" y2="13" /><line x1="12" x2="12.01" y1="17" y2="17" /></React.Fragment>,
            MapPin: <React.Fragment><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z" /><circle cx="12" cy="10" r="3" /></React.Fragment>,
            Calendar: <React.Fragment><rect width="18" height="18" x="3" y="4" rx="2" ry="2" /><line x1="16" x2="16" y1="2" y2="6" /><line x1="8" x2="8" y1="2" y2="6" /><line x1="3" x2="21" y1="10" y2="10" /></React.Fragment>,
            MessageSquare: <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" />,
            Send: <React.Fragment><path d="m22 2-7 20-4-9-9-4Z" /><path d="M22 2 11 13" /></React.Fragment>,
            CornerDownRight: <React.Fragment><polyline points="15 10 20 15 15 20" /><path d="M4 4v7a4 4 0 0 0 4 4h12" /></React.Fragment>,
            UserPlus: <React.Fragment><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" /><circle cx="9" cy="7" r="4" /><line x1="19" x2="19" y1="8" y2="14" /><line x1="22" x2="16" y1="11" y2="11" /></React.Fragment>,
            
            // Category Icons
            Megaphone: <React.Fragment><path d="m3 11 18-5v12L3 14v-3z" /><path d="M11.6 16.8a3 3 0 1 1-5.8-1.6" /></React.Fragment>,
            Store: <React.Fragment><path d="m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7" /><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8" /><path d="M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4" /><path d="M2 7h20" /><path d="M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7" /></React.Fragment>,
            FlaskConical: <React.Fragment><path d="M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2" /><path d="M8.5 2h7" /><path d="M7 16h10" /></React.Fragment>,
            IdCard: <React.Fragment><rect width="18" height="14" x="3" y="5" rx="2" /><circle cx="9" cy="9" r="2" /><path d="M15 13h2" /><path d="M15 17h2" /><path d="M7 17h.01" /><path d="M7 13h.01" /></React.Fragment>,
            Shirt: <path d="M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z" />,
            FileText: <React.Fragment><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z" /><polyline points="14 2 14 8 20 8" /><line x1="16" x2="8" y1="13" y2="13" /><line x1="16" x2="8" y1="17" y2="17" /><line x1="10" x2="8" y1="9" y2="9" /></React.Fragment>,
            Warehouse: <React.Fragment><path d="M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z" /><path d="M6 18h12" /><path d="M6 14h12" /><rect width="12" height="12" x="6" y="10" /></React.Fragment>,
            Tv: <React.Fragment><rect width="20" height="15" x="2" y="7" rx="2" ry="2" /><polyline points="17 2 12 7 7 2" /></React.Fragment>,
            Armchair: <React.Fragment><path d="M19 9V6a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v3" /><path d="M3 16a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v2H7v-2a2 2 0 0 0-4 0Z" /><path d="M5 18v2" /><path d="M19 18v2" /></React.Fragment>,
            IceCream: <React.Fragment><path d="m7 11 4.08 10.35a1 1 0 0 0 1.84 0L17 11" /><path d="M17 7A5 5 0 0 0 7 7" /><path d="M17 7a2 2 0 0 1 0 4H7a2 2 0 0 1 0-4" /></React.Fragment>,
            Utensils: <React.Fragment><path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2" /><path d="M7 2v20" /><path d="M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7" /></React.Fragment>,
            Mic2: <React.Fragment><path d="m12 8-9.04 9.06a2.82 2.82 0 1 0 3.98 3.98L16 12" /><circle cx="17" cy="7" r="5" /></React.Fragment>,
            GlassWater: <React.Fragment><path d="M15.2 22H8.8a2 2 0 0 1-2-1.79L5 3h14l-1.81 17.21A2 2 0 0 1 15.2 22Z" /><path d="M6 12a5 5 0 0 1 6 0 5 5 0 0 0 6 0" /></React.Fragment>,
            Coffee: <React.Fragment><path d="M17 8h1a4 4 0 1 1 0 8h-1" /><path d="M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z" /><line x1="6" x2="6" y1="2" y2="4" /><line x1="10" x2="10" y1="2" y2="4" /><line x1="14" x2="14" y1="2" y2="4" /></React.Fragment>,
            Milk: <React.Fragment><path d="M8 2h8" /><path d="M9 2v2.78c0 .47.25.88.66 1.07l.18.09a3 3 0 0 0 2.32 0l.18-.09c.41-.19.66-.6.66-1.07V2" /><path d="M6 9v11a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2Z" /></React.Fragment>,
            ChefHat: <React.Fragment><path d="M6 13.87A4 4 0 0 1 7.41 6a5.11 5.11 0 0 1 1.05-1.54 5 5 0 0 1 9.08 0A5.11 5.11 0 0 1 18.59 6 4 4 0 0 1 20 13.87V21H6Z" /><line x1="6" x2="20" y1="17" y2="17" /></React.Fragment>,
            Smartphone: <React.Fragment><rect width="14" height="20" x="5" y="2" rx="2" ry="2" /><path d="M12 18h.01" /></React.Fragment>,
            Building: <React.Fragment><rect width="16" height="20" x="4" y="2" rx="2" ry="2" /><path d="M9 22v-4h6v4" /><path d="M8 6h.01" /><path d="M16 6h.01" /><path d="M12 6h.01" /><path d="M12 10h.01" /><path d="M12 14h.01" /><path d="M16 10h.01" /><path d="M16 14h.01" /><path d="M8 10h.01" /><path d="M8 14h.01" /></React.Fragment>,
            Hammer: <React.Fragment><path d="m15 12-8.5 8.5c-.83.83-2.17.83-3 0 0 0 0 0 0 0a2.12 2.12 0 0 1 0-3L12 9" /><path d="M17.64 15 22 10.64" /><path d="m20.91 11.7-1.25-1.25c-.6-.6-.93-1.4-.93-2.25V2.46V2a2 2 0 0 0-2-2h-3a2 2 0 0 0-2 2v.46c0 .85-.33 1.65-.93 2.25L9.5 5.96" /></React.Fragment>,
            Package: <React.Fragment><path d="m7.5 4.27 9 5.15" /><path d="M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z" /><path d="m3.3 7 8.7 5 8.7-5" /><path d="M12 22v-9" /></React.Fragment>,
            Palette: <React.Fragment><circle cx="13.5" cy="6.5" r=".5" fill="currentColor"/><circle cx="17.5" cy="10.5" r=".5" fill="currentColor"/><circle cx="8.5" cy="7.5" r=".5" fill="currentColor"/><circle cx="6.5" cy="12.5" r=".5" fill="currentColor"/><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z" /></React.Fragment>,
        };

        const Icon = ({ name, size = 18, className }) => {
            const iconContent = ICONS[name] || ICONS["Plus"]; 
            return (
                <svg 
                    xmlns="http://www.w3.org/2000/svg" 
                    width={size} 
                    height={size} 
                    viewBox="0 0 24 24" 
                    fill="none" 
                    stroke="currentColor" 
                    strokeWidth="2" 
                    strokeLinecap="round" 
                    strokeLinejoin="round" 
                    className={className}
                >
                    {iconContent}
                </svg>
            );
        };

        // --- PRESET AVATARS ---
        const PRESET_AVATARS = [
            "https://api.dicebear.com/9.x/notionists/svg?seed=Felix",
            "https://api.dicebear.com/9.x/notionists/svg?seed=Aneka",
            "https://api.dicebear.com/9.x/notionists/svg?seed=Milo",
            "https://api.dicebear.com/9.x/notionists/svg?seed=Sora",
            "https://api.dicebear.com/9.x/notionists/svg?seed=Bella",
            "https://api.dicebear.com/9.x/notionists/svg?seed=Leo"
        ];

        // --- DADOS INICIAIS ---
        const INITIAL_TEAM = [
            { id: 1, name: "Paulo Mokarzel", role: "Gestor", photo: "https://api.dicebear.com/9.x/notionists/svg?seed=Paulo", workload: 80 },
            { id: 2, name: "Felipe", role: "Coord.", photo: "https://api.dicebear.com/9.x/notionists/svg?seed=Felipe", workload: 65 },
            { id: 3, name: "Matheus", role: "Design", photo: "https://api.dicebear.com/9.x/notionists/svg?seed=Matheus", workload: 90 },
            { id: 4, name: "Larissa", role: "Produtora", photo: "https://api.dicebear.com/9.x/notionists/svg?seed=Larissa", workload: 45 },
            { id: 5, name: "Claudiano", role: "Técnico", photo: "https://api.dicebear.com/9.x/notionists/svg?seed=Claudiano", workload: 30 },
            { id: 6, name: "Suzana", role: "Conteúdo", photo: "https://api.dicebear.com/9.x/notionists/svg?seed=Suzana", workload: 50 },
            { id: 7, name: "Dominik", role: "Estrutura", photo: "https://api.dicebear.com/9.x/notionists/svg?seed=Dominik", workload: 70 },
        ];

        // --- DADOS ESTRUTURADOS (FISPAL) ---
        const FISPAL_DATA_RAW = {
            "Pré-Evento": {
                "Comunicação Institucional": {
                    resp: "Suzana", icon: "Megaphone",
                    items: [
                        { id: 101, task: "Comunicação", status: "VERDE", chat: [] },
                        { id: 102, task: "Save the Date", status: "VERDE", chat: [] },
                        { id: 103, task: "Convite oficial", status: "VERDE", chat: [] },
                        { id: 104, task: "Sequencia de lembretes", status: "VERDE", chat: [] },
                        { id: 105, task: "Contratação Storymaker", status: "VERDE", chat: [] },
                        { id: 106, task: "Captação Lançamentos", status: "VERDE", chat: [] },
                        { id: 107, task: "E-book de Receitas", status: "AMARELO", chat: [] },
                        { id: 108, task: "Automação Redes Sociais", status: "AMARELO", chat: [] },
                        { id: 109, task: "Criar Qr Code E-books", status: "AMARELO", chat: [] }
                    ]
                },
                "Estande": {
                    resp: "Dominik", icon: "Store",
                    items: [
                        { id: 201, task: "Fechar projeto", status: "VERDE", chat: [] },
                        { id: 202, task: "Formalização Compras", status: "AMARELO", chat: [] },
                        { id: 203, task: "Submissão projeto base", status: "VERDE", chat: [] },
                        { id: 204, task: "Ajustes no projeto", status: "VERDE", chat: [] },
                        { id: 205, task: "Contrato Montadora", status: "VERDE", chat: [] },
                        { id: 206, task: "Preenchimento Portal", status: "VERDE", chat: [] },
                        { id: 207, task: "RETIRAR CREDENCIAL", status: "VERDE", chat: [] },
                        { id: 208, task: "EPIs - Capacete", status: "VERDE", chat: [] }
                    ]
                },
                "Amostras e Produção": {
                    resp: "Claudiano", icon: "FlaskConical",
                    items: [
                        { id: 301, task: "Levantamento", status: "VERDE", chat: [] },
                        { id: 302, task: "Requisição de Compras", status: "VERDE", chat: [] },
                        { id: 303, task: "Compra", status: "VERDE", chat: [] },
                        { id: 304, task: "Preparação Material", status: "VERDE", chat: [] }
                    ]
                },
                "Credenciamento / Cadastro": {
                    resp: "Dominik", icon: "IdCard",
                    items: [
                        { id: 401, task: "Credenciais time", status: "VERDE", chat: [] },
                        { id: 402, task: "Credenciais diretores", status: "VERDE", chat: [] },
                        { id: 403, task: "Envio para Doremus", status: "VERDE", chat: [] },
                        { id: 404, task: "Preenchimento Portal", status: "VERDE", chat: [] },
                        { id: 405, task: "Lista de Participantes", status: "VERDE", chat: [] },
                        { id: 406, task: "Credenciamento Catering", status: "VERDE", chat: [] },
                        { id: 407, task: "Credenciamento Filmagem", status: "AMARELO", chat: [] }
                    ]
                },
                "Camisas": {
                    resp: "Dominik", icon: "Shirt",
                    items: [
                        { id: 501, task: "Levantamento", status: "VERDE", chat: [] },
                        { id: 502, task: "Compra", status: "VERDE", chat: [] },
                        { id: 503, task: "Entrega", status: "VERDE", chat: [] }
                    ]
                },
                "Briefing Geral": {
                    resp: "Claudiano", icon: "FileText",
                    items: [
                        { id: 601, task: "Reserva Auditório", status: "VERDE", chat: [] },
                        { id: 602, task: "POSSO PRECISAR DE AJUDA", status: "AMARELO", chat: [] },
                        { id: 603, task: "Apresentação", status: "VERDE", chat: [] },
                        { id: 604, task: "Campanha", status: "VERDE", chat: [] }
                    ]
                }
            },
            "Evento": {
                "Laboratório": {
                    resp: "Claudiano", icon: "FlaskConical",
                    items: [
                        { id: 701, task: "Geladeira grande", status: "VERDE", chat: [] },
                        { id: 702, task: "Freezer tampa cega", status: "VERDE", chat: [] },
                        { id: 703, task: "Ultracongelador", status: "VERDE", chat: [] },
                        { id: 704, task: "Ultracongelador Doremus", status: "VERDE", chat: [] },
                        { id: 705, task: "Produtoras", status: "VERDE", chat: [] },
                        { id: 706, task: "Carrinho Pneumático", status: "VERDE", chat: [] },
                        { id: 707, task: "Teste equipamentos", status: "VERDE", chat: [] },
                        { id: 708, task: "Pia industrial", status: "VERDE", chat: [] }
                    ]
                },
                "Depósito": {
                    resp: "Claudiano", icon: "Warehouse",
                    items: [
                        { id: 801, task: "Lockers", status: "VERDE", chat: [] },
                        { id: 802, task: "Cadeados", status: "VERDE", chat: [] },
                        { id: 803, task: "Responsáveis Chave", status: "VERDE", chat: [] },
                        { id: 804, task: "Toten carregadores", status: "VERDE", chat: [] }
                    ]
                },
                "Painel de Led": {
                    resp: "Suzana", icon: "Tv",
                    items: [
                        { id: 901, task: "Receber mapa pixels", status: "VERDE", chat: [] },
                        { id: 902, task: "Mapa de Conteúdos", status: "VERDE", chat: [] },
                        { id: 903, task: "Roteiro", status: "VERDE", chat: [] },
                        { id: 904, task: "Produção Vídeos", status: "VERDE", chat: [] },
                        { id: 905, task: "Envio e teste", status: "AMARELO", chat: [] },
                        { id: 906, task: "Vídeos Lançamentos", status: "VERDE", chat: [] },
                        { id: 907, task: "Vídeos Dorecast", status: "VERDE", chat: [] }
                    ]
                },
                "Comunicação Geral": {
                    resp: "Larissa", icon: "Megaphone",
                    items: [
                        { id: 1001, task: "Paineis internos", status: "VERDE", chat: [] },
                        { id: 1002, task: "Painel anexo 2", status: "AMARELO", chat: [] },
                        { id: 1003, task: "Flyers Lançamentos", status: "VERDE", chat: [] },
                        { id: 1004, task: "Catálogo refação", status: "AMARELO", chat: [] },
                        { id: 1005, task: "Comunicação Pós-Evento", status: "AMARELO", chat: [] }
                    ]
                },
                "Salão Principal": {
                    resp: "Dominik", icon: "Armchair",
                    items: [
                        { id: 1101, task: "Bistrôs Locação", status: "VERDE", chat: [] },
                        { id: 1102, task: "Numeração mesas", status: "VERDE", chat: [] },
                        { id: 1103, task: "Ficha de Pedido", status: "AMARELO", chat: [] },
                        { id: 1104, task: "Equipe Segurança", status: "VERDE", chat: [] },
                        { id: 1105, task: "Totem Leads", status: "VERDE", chat: [] },
                        { id: 1106, task: "Brindes", status: "VERDE", chat: [] }
                    ]
                },
                "Degustação Sorvete": {
                    resp: "Claudiano", icon: "IceCream",
                    items: [
                        { id: 1201, task: "Vitrines", status: "VERDE", chat: [] },
                        { id: 1202, task: "Plaquinhas", status: "VERDE", chat: [] },
                        { id: 1203, task: "Envio Caldas", status: "VERDE", chat: [] },
                        { id: 1204, task: "Picolés Freezer", status: "VERDE", chat: [] },
                        { id: 1205, task: "Promotoras", status: "VERDE", chat: [] }
                    ]
                },
                "Açaí": {
                    resp: "Larissa", icon: "Utensils",
                    items: [
                        { id: 1301, task: "Açaizeiro", status: "VERDE", chat: [] },
                        { id: 1302, task: "Freezer Açaís", status: "VERDE", chat: [] },
                        { id: 1303, task: "Recheios montagem", status: "AMARELO", chat: [] },
                        { id: 1304, task: "Plaquinhas expositor", status: "AMARELO", chat: [] }
                    ]
                },
                "Dorecast": {
                    resp: "Suzana", icon: "Mic2",
                    items: [
                        { id: 1401, task: "Definir convidados", status: "VERDE", chat: [] },
                        { id: 1402, task: "Criar roteiros", status: "AMARELO", chat: [] },
                        { id: 1403, task: "Equipe audiovisual", status: "VERDE", chat: [] },
                        { id: 1404, task: "Cortes em massa", status: "AMARELO", chat: [] },
                        { id: 1405, task: "Copo Stanley Personalizado", status: "VERDE", chat: [] }
                    ]
                },
                "Copa": {
                    resp: "Dominik", icon: "GlassWater",
                    items: [
                        { id: 1501, task: "Freezer", status: "VERDE", chat: [] },
                        { id: 1502, task: "Geladeira", status: "VERDE", chat: [] },
                        { id: 1503, task: "Copeira", status: "VERDE", chat: [] },
                        { id: 1504, task: "Garçom", status: "VERDE", chat: [] }
                    ]
                },
                "Espaço Café": {
                    resp: "Larissa", icon: "Coffee",
                    items: [
                        { id: 1601, task: "Recheios Affogato", status: "VERDE", chat: [] },
                        { id: 1602, task: "Xícaras", status: "VERDE", chat: [] },
                        { id: 1603, task: "Barista Contratação", status: "VERDE", chat: [] },
                        { id: 1604, task: "Parceria 3 Corações", status: "VERDE", chat: [] }
                    ]
                },
                "Soft & Milkshake": {
                    resp: "Larissa", icon: "Milk",
                    items: [
                        { id: 1701, task: "Máquinas Soft", status: "VERDE", chat: [] },
                        { id: 1702, task: "Mixers", status: "VERDE", chat: [] },
                        { id: 1703, task: "Sanduicheiras", status: "VERDE", chat: [] },
                        { id: 1704, task: "Plaquinhas expositor", status: "AMARELO", chat: [] }
                    ]
                },
                "Confeitaria": {
                    resp: "Larissa", icon: "ChefHat",
                    items: [
                        { id: 1801, task: "Aula Thiago Pedebis", status: "VERDE", chat: [] },
                        { id: 1802, task: "Vitrine", status: "VERDE", chat: [] },
                        { id: 1803, task: "Ingredientes", status: "VERDE", chat: [] }
                    ]
                },
                "Ação Totens": {
                    resp: "Claudiano", icon: "Smartphone",
                    items: [
                        { id: 1901, task: "Criar Convite", status: "VERDE", chat: [] },
                        { id: 1902, task: "Enviar Arte Fispal", status: "VERDE", chat: [] },
                        { id: 1903, task: "Acompanhar instalação", status: "AMARELO", chat: [] }
                    ]
                },
                "Evento na Doremus": {
                    resp: "Claudiano", icon: "Building",
                    items: [
                        { id: 2001, task: "Thiago Pedebis Confirmar", status: "AMARELO", chat: [] },
                        { id: 2002, task: "Transfer", status: "VERDE", chat: [] },
                        { id: 2003, task: "Brindes", status: "VERDE", chat: [] },
                        { id: 2004, task: "Coffee Break", status: "VERDE", chat: [] }
                    ]
                },
                "Geral / Montagem": {
                    resp: "Dominik", icon: "Hammer",
                    items: [
                        { id: 2101, task: "Pontos elétrica", status: "VERDE", chat: [] },
                        { id: 2102, task: "Responsável maquinário", status: "AMARELO", chat: [] },
                        { id: 2103, task: "Responsável limpeza", status: "AMARELO", chat: [] },
                        { id: 2104, task: "Rádios", status: "VERDE", chat: [] }
                    ]
                }
            }
        };

        const INITIAL_EVENTS = [
            { id: "fispal", title: "Fispal Sorvetes", date: "10 a 13 de Junho", month: "JUN", day: "10", location: "Expo Center Norte, SP", pending: 21, cover: null },
            { id: "convencao", title: "Convenção de Vendas", date: "02 a 06 de Fevereiro", month: "FEV", day: "02", location: "Auditório Doremus", pending: 60, cover: null },
            { id: "nis", title: "Nis Nutri", date: "31 Mar a 01 Abr", month: "MAR", day: "31", location: "Transamerica Expo", pending: 117, cover: null },
        ];

        // --- COMPONENTS ---

        const Avatar = ({ user, size = "w-8 h-8" }) => (
            <img 
                src={user.photo} 
                alt={user.name} 
                className={`${size} rounded-full object-cover border-2 border-white shadow-sm bg-slate-100`}
                title={`${user.name} - ${user.role}`}
            />
        );

        const Workload = ({ user }) => (
            <div className="flex flex-col items-center gap-1 min-w-[48px]">
                <div className="h-1.5 w-full bg-slate-100 rounded-full overflow-hidden">
                    <div className={`h-full rounded-full ${user.workload > 70 ? 'bg-red-400' : 'bg-brand-blue'}`} style={{width: `${user.workload}%`}}></div>
                </div>
                <Avatar user={user} size="w-8 h-8" />
            </div>
        );

        // --- TASK DETAIL MODAL ---
        const TaskModal = ({ task, categoryResp, onClose, onUpdate }) => {
            const [chatText, setChatText] = useState("");
            const [isWarning, setIsWarning] = useState(false);
            const [messages, setMessages] = useState(task.chat || []);
            const [supportList, setSupportList] = useState(task.support || []);
            const [showSupportSelect, setShowSupportSelect] = useState(false);

            const handleSend = () => {
                if (!chatText.trim()) return;
                const newMessage = {
                    id: Date.now(),
                    user: INITIAL_TEAM[0], // Mock current user
                    text: chatText,
                    isWarning: isWarning,
                    date: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })
                };
                const newMessages = [...messages, newMessage];
                setMessages(newMessages);
                onUpdate({ ...task, chat: newMessages });
                setChatText("");
                setIsWarning(false);
            };

            const toggleSupport = (user) => {
                let newSupport;
                if (supportList.find(u => u.id === user.id)) {
                    newSupport = supportList.filter(u => u.id !== user.id);
                } else {
                    newSupport = [...supportList, user];
                }
                setSupportList(newSupport);
                onUpdate({ ...task, support: newSupport });
            };

            return (
                <div className="fixed inset-0 z-50 flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 animate-fade-in" onClick={onClose}>
                    <div className="bg-white rounded-2xl w-full max-w-2xl shadow-2xl overflow-hidden animate-slide-up flex flex-col max-h-[90vh]" onClick={e => e.stopPropagation()}>
                        {/* Header */}
                        <div className="p-6 border-b border-slate-100 flex justify-between items-start bg-white">
                            <div>
                                <div className="flex items-center gap-3 mb-2">
                                    <span className={`px-2 py-0.5 rounded text-[10px] font-bold border ${task.status === 'VERDE' ? 'status-verde' : task.status === 'AMARELO' ? 'status-amarelo' : 'status-vermelho'}`}>
                                        {task.status}
                                    </span>
                                    <span className="text-slate-400 text-xs">ID: #{task.id}</span>
                                </div>
                                <h3 className="text-xl font-bold text-slate-800">{task.task}</h3>
                            </div>
                            <button onClick={onClose} className="p-2 hover:bg-slate-100 rounded-full text-slate-400"><Icon name="X" /></button>
                        </div>

                        <div className="flex-1 overflow-y-auto p-6 bg-slate-50">
                            {/* People Section */}
                            <div className="bg-white p-4 rounded-xl border border-slate-200 mb-6 shadow-sm">
                                <div className="flex items-start gap-8">
                                    <div>
                                        <p className="text-xs font-bold text-slate-400 uppercase mb-2">Responsável</p>
                                        <div className="flex items-center gap-2">
                                            <Avatar user={INITIAL_TEAM.find(t => t.name.includes(categoryResp)) || INITIAL_TEAM[0]} />
                                            <span className="text-sm font-bold text-slate-700">{categoryResp}</span>
                                        </div>
                                    </div>
                                    <div className="flex-1">
                                        <div className="flex justify-between items-center mb-2">
                                            <p className="text-xs font-bold text-slate-400 uppercase">Apoio</p>
                                            <button onClick={() => setShowSupportSelect(!showSupportSelect)} className="text-xs text-brand-blue font-bold hover:underline">+ Adicionar</button>
                                        </div>
                                        <div className="flex flex-wrap gap-2">
                                            {supportList.map(u => (
                                                <div key={u.id} className="flex items-center gap-1 bg-slate-100 px-2 py-1 rounded-full border border-slate-200">
                                                    <Avatar user={u} size="w-5 h-5" border={false} />
                                                    <span className="text-xs font-medium text-slate-600">{u.name.split(' ')[0]}</span>
                                                    <button onClick={() => toggleSupport(u)} className="text-slate-400 hover:text-red-500 ml-1"><Icon name="X" size={12} /></button>
                                                </div>
                                            ))}
                                            {supportList.length === 0 && <span className="text-xs text-slate-400 italic">Ninguém alocado</span>}
                                        </div>
                                        
                                        {/* Dropdown de Apoio */}
                                        {showSupportSelect && (
                                            <div className="mt-2 p-2 bg-white border border-slate-200 rounded-lg shadow-lg grid grid-cols-2 gap-2 animate-fade-in">
                                                {INITIAL_TEAM.map(u => (
                                                    <button 
                                                        key={u.id} 
                                                        onClick={() => toggleSupport(u)}
                                                        className={`flex items-center gap-2 p-1.5 rounded-lg text-left text-xs hover:bg-slate-50 ${supportList.find(s => s.id === u.id) ? 'bg-brand-light text-brand-blue' : 'text-slate-600'}`}
                                                    >
                                                        <Avatar user={u} size="w-6 h-6" />
                                                        {u.name}
                                                    </button>
                                                ))}
                                            </div>
                                        )}
                                    </div>
                                </div>
                            </div>

                            {/* Chat Section */}
                            <div>
                                <h4 className="text-sm font-bold text-slate-700 mb-4 flex items-center gap-2">
                                    <Icon name="MessageSquare" size={16} /> Comunicação & Avisos
                                </h4>
                                <div className="space-y-4 mb-4 min-h-[150px]">
                                    {messages.length === 0 ? (
                                        <div className="text-center py-8 text-slate-400 text-sm">Nenhuma mensagem ainda.</div>
                                    ) : (
                                        messages.map((msg) => (
                                            <div key={msg.id} className={`flex gap-3 ${msg.user.id === 1 ? 'flex-row-reverse' : ''}`}>
                                                <Avatar user={msg.user} />
                                                <div className={`flex flex-col max-w-[80%] ${msg.user.id === 1 ? 'items-end' : 'items-start'}`}>
                                                    <div className={`p-3 rounded-2xl text-sm ${
                                                        msg.isWarning 
                                                            ? 'bg-amber-100 text-amber-800 border border-amber-200' 
                                                            : msg.user.id === 1 
                                                                ? 'bg-brand-blue text-white rounded-tr-none' 
                                                                : 'bg-white border border-slate-200 text-slate-700 rounded-tl-none'
                                                    }`}>
                                                        {msg.isWarning && <div className="flex items-center gap-1 font-bold mb-1 text-xs uppercase"><Icon name="AlertTriangle" size={10} /> Aviso</div>}
                                                        {msg.text}
                                                    </div>
                                                    <span className="text-[10px] text-slate-400 mt-1 px-1">{msg.user.name} • {msg.date}</span>
                                                </div>
                                            </div>
                                        ))
                                    )}
                                </div>
                            </div>
                        </div>

                        {/* Footer Input */}
                        <div className="p-4 bg-white border-t border-slate-100">
                            <div className="flex items-center gap-2 mb-2">
                                <label className="flex items-center gap-2 text-xs font-bold text-slate-500 cursor-pointer hover:text-amber-600 transition-colors">
                                    <input type="checkbox" checked={isWarning} onChange={e => setIsWarning(e.target.checked)} className="rounded text-amber-500 focus:ring-amber-500" />
                                    Marcar como Aviso Importante
                                </label>
                            </div>
                            <div className="flex gap-2">
                                <input 
                                    type="text" 
                                    value={chatText} 
                                    onChange={e => setChatText(e.target.value)}
                                    onKeyDown={e => e.key === 'Enter' && handleSend()}
                                    placeholder="Escreva uma mensagem..."
                                    className="flex-1 p-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-brand-blue"
                                />
                                <button onClick={handleSend} className="p-3 bg-brand-navy hover:bg-brand-blue text-white rounded-xl transition-colors">
                                    <Icon name="Send" />
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const TaskItem = ({ task, status, resp, onClick }) => {
            const respUser = INITIAL_TEAM.find(t => t.name.includes(resp)) || INITIAL_TEAM[0];
            const supportUsers = task.support || [];
            
            return (
                <div onClick={onClick} className="flex items-center justify-between p-3 bg-white border border-slate-100 rounded-xl hover:shadow-md hover:border-brand-blue/30 transition-all group cursor-pointer relative overflow-hidden">
                    {/* Status Indicator Bar */}
                    <div className={`absolute left-0 top-0 bottom-0 w-1 ${status === 'VERDE' ? 'bg-emerald-500' : status === 'AMARELO' ? 'bg-amber-500' : 'bg-rose-500'}`}></div>
                    
                    <div className="flex items-center gap-3 overflow-hidden pl-2">
                        <span className={`text-sm font-medium truncate text-slate-700`}>{task.task}</span>
                    </div>
                    
                    <div className="flex items-center gap-3 pl-2">
                        <div className="flex -space-x-2">
                            <Avatar user={respUser} size="w-6 h-6" />
                            {supportUsers.map(u => <Avatar key={u.id} user={u} size="w-6 h-6" />)}
                        </div>
                        
                        {(task.chat && task.chat.length > 0) && (
                            <div className="flex items-center gap-1 text-slate-400 text-xs">
                                <Icon name="MessageSquare" size={14} /> {task.chat.length}
                            </div>
                        )}
                    </div>
                </div>
            )
        };

        const CategoryColumn = ({ title, icon, items, resp, onTaskClick }) => {
            return (
                <div className="bg-white rounded-2xl border border-slate-200 shadow-sm flex flex-col h-[450px]">
                    <div className="p-4 border-b border-slate-100 bg-slate-50 rounded-t-2xl flex justify-between items-center">
                        <div className="flex items-center gap-2">
                            <div className="p-2 bg-white text-brand-blue rounded-lg shadow-sm"><Icon name={icon} size={18}/></div>
                            <h3 className="font-bold text-slate-700">{title}</h3>
                        </div>
                        <span className="text-xs font-bold text-slate-400 bg-white px-2 py-1 rounded-full border border-slate-200">{items.length}</span>
                    </div>
                    <div className="flex-1 overflow-y-auto p-3 space-y-2 custom-scrollbar">
                        {items.map((item, i) => (
                            <TaskItem 
                                key={item.id} 
                                task={item} 
                                status={item.status} 
                                resp={resp} 
                                onClick={() => onTaskClick(item, resp)}
                            />
                        ))}
                    </div>
                </div>
            );
        };

        const App = () => {
            const [view, setView] = useState('hub');
            const [activeTab, setActiveTab] = useState("Pré-Evento");
            const [eventData, setEventData] = useState(FISPAL_DATA_RAW);
            const [events, setEvents] = useState(INITIAL_EVENTS);
            const [team, setTeam] = useState(INITIAL_TEAM);
            const [activeEvent, setActiveEvent] = useState(null);
            const [appLogo, setAppLogo] = useState(null);
            
            // Modal States
            const [selectedTask, setSelectedTask] = useState(null);
            const [selectedTaskResp, setSelectedTaskResp] = useState("");
            
            // Member Edit States
            const [showMemberModal, setShowMemberModal] = useState(false);
            const [editingMember, setEditingMember] = useState(null);
            const [formName, setFormName] = useState("");
            const [formRole, setFormRole] = useState("");
            const [formPhoto, setFormPhoto] = useState("");

            const handleEventClick = (evt) => {
                setActiveEvent(evt);
                setView('event');
            };

            const handleCoverUpload = (e, evtId) => {
                const file = e.target.files[0];
                if(file) {
                    const reader = new FileReader();
                    reader.onload = (x) => {
                        setEvents(prev => prev.map(ev => ev.id === evtId ? {...ev, cover: x.target.result} : ev));
                    }
                    reader.readAsDataURL(file);
                }
            };

            // Task Update Logic
            const handleTaskClick = (task, resp) => {
                setSelectedTask(task);
                setSelectedTaskResp(resp);
            };

            const updateTaskData = (updatedTask) => {
                setEventData(prev => {
                    const newData = { ...prev };
                    for (const stage in newData) {
                        for (const cat in newData[stage]) {
                            const items = newData[stage][cat].items;
                            const idx = items.findIndex(t => t.id === updatedTask.id);
                            if (idx !== -1) {
                                items[idx] = updatedTask;
                                return newData; 
                            }
                        }
                    }
                    return newData;
                });
                setSelectedTask(updatedTask);
            };

            const handleLogoUpload = (e) => {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onloadend = () => setAppLogo(reader.result);
                    reader.readAsDataURL(file);
                }
            };

            // Member Logic
            const openEditMember = (member) => {
                if(member) {
                    setEditingMember(member);
                    setFormName(member.name);
                    setFormRole(member.role);
                    setFormPhoto(member.photo);
                } else {
                    setEditingMember(null);
                    setFormName("");
                    setFormRole("");
                    setFormPhoto(PRESET_AVATARS[0]);
                }
                setShowMemberModal(true);
            };

            const saveMember = () => {
                if(editingMember) {
                    setTeam(prev => prev.map(m => m.id === editingMember.id ? {...m, name: formName, role: formRole, photo: formPhoto} : m));
                } else {
                    setTeam(prev => [...prev, { id: Date.now(), name: formName, role: formRole, photo: formPhoto, workload: 0 }]);
                }
                setShowMemberModal(false);
            };

            const handleUploadMemberPhoto = (e) => {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onloadend = () => setFormPhoto(reader.result);
                    reader.readAsDataURL(file);
                }
            };

            if (view === 'hub') {
                return (
                    <div className="min-h-screen max-w-[1440px] mx-auto p-6 pb-20">
                        {/* Header */}
                        <div className="flex justify-between items-center mb-8 bg-white p-4 rounded-2xl shadow-soft">
                            <div className="flex items-center gap-6">
                                <div className="relative group cursor-pointer">
                                    <input 
                                        type="file" 
                                        className="hidden" 
                                        id="logo-upload" 
                                        accept="image/*" 
                                        onChange={handleLogoUpload} 
                                    />
                                    <label htmlFor="logo-upload" className="cursor-pointer">
                                        {appLogo ? (
                                            <img src={appLogo} className="h-10 w-auto object-contain" alt="Logo" />
                                        ) : (
                                            <div className="h-10 w-28 bg-brand-navy rounded-lg flex items-center justify-center text-white font-bold text-sm tracking-wider shadow-md group-hover:bg-brand-blue transition-colors">
                                                DOREMUS
                                            </div>
                                        )}
                                    </label>
                                </div>
                                <div className="h-8 w-px bg-slate-200"></div>
                                <div>
                                    <h1 className="text-xl font-bold text-slate-800 leading-none">Event Hub</h1>
                                    <p className="text-xs text-slate-500 font-medium mt-1">Painel de Marketing</p>
                                </div>
                            </div>
                            <div className="flex items-center gap-4">
                                <div className="flex items-center gap-3 cursor-pointer hover:bg-slate-50 p-2 rounded-xl" onClick={() => openEditMember(team[0])}>
                                    <div className="text-right hidden md:block">
                                        <p className="text-xs font-bold text-slate-400 uppercase">Gestor</p>
                                        <p className="text-sm font-bold text-slate-800">{team[0].name}</p>
                                    </div>
                                    <Avatar user={team[0]} size="w-10 h-10" />
                                </div>
                                <button onClick={() => openEditMember(null)} className="p-2.5 border border-slate-200 rounded-xl text-slate-500 hover:bg-slate-50 hover:text-brand-navy flex gap-2 items-center text-xs font-bold transition-all">
                                    <Icon name="Users" size={16}/> Equipe
                                </button>
                                <button className="bg-brand-navy hover:bg-brand-blue text-white px-5 py-2.5 rounded-xl text-sm font-bold shadow-lg shadow-brand-navy/20 flex items-center gap-2 transition-all">
                                    <Icon name="Plus" size={16}/> Novo Evento
                                </button>
                            </div>
                        </div>

                        {/* Stats Panel */}
                        <div className="bg-white rounded-3xl p-8 mb-8 shadow-soft border border-slate-100 flex flex-col md:flex-row gap-12">
                            <div className="flex items-center gap-8 min-w-[300px]">
                                <div className="relative w-32 h-32">
                                    <svg viewBox="0 0 36 36" className="w-full h-full transform -rotate-90">
                                        <path d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" fill="none" stroke="#f1f5f9" strokeWidth="3" />
                                        <path d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" fill="none" stroke="#2563eb" strokeWidth="3" strokeDasharray="30, 100" strokeLinecap="round" />
                                    </svg>
                                    <div className="absolute inset-0 flex flex-col items-center justify-center">
                                        <span className="text-4xl font-bold text-slate-800">30%</span>
                                        <span className="text-[10px] font-bold text-slate-400 uppercase">Concluído</span>
                                    </div>
                                </div>
                                <div>
                                    <h3 className="text-lg font-bold text-slate-800 mb-2">Status Global</h3>
                                    <div className="space-y-2">
                                        <div className="flex items-center gap-2 text-xs font-bold text-emerald-600 bg-emerald-50 px-2 py-1 rounded"><div className="w-2 h-2 rounded-full bg-emerald-500"></div> 45 Feitas</div>
                                        <div className="flex items-center gap-2 text-xs font-bold text-amber-600 bg-amber-50 px-2 py-1 rounded"><div className="w-2 h-2 rounded-full bg-amber-500"></div> 175 Pendentes</div>
                                    </div>
                                </div>
                            </div>
                            <div className="w-px bg-slate-100 hidden md:block"></div>
                            <div className="flex-1">
                                <h3 className="text-sm font-bold text-slate-800 mb-6 flex items-center gap-2"><Icon name="BarChart3" size={16}/> Carga de Trabalho</h3>
                                <div className="flex gap-8 overflow-x-auto pb-4">
                                    {team.map(m => <Workload key={m.id} user={m} />)}
                                </div>
                            </div>
                        </div>

                        {/* Events List */}
                        <div className="space-y-6">
                            <h2 className="text-xl font-bold text-slate-800 flex items-center gap-2">
                                <Icon name="Clock" className="text-brand-blue" /> Próximos Eventos
                            </h2>
                            <div className="grid gap-4">
                                {events.map(evt => (
                                    <div key={evt.id} className="relative group rounded-2xl overflow-hidden shadow-card hover:shadow-lg transition-all bg-white border border-slate-200">
                                        {/* Background Cover */}
                                        <div 
                                            className="absolute inset-0 z-0 bg-slate-50 transition-transform group-hover:scale-105 duration-700" 
                                            style={{
                                                backgroundImage: evt.cover ? `url(${evt.cover})` : 'none',
                                                backgroundSize: 'cover',
                                                backgroundPosition: 'center'
                                            }}
                                        >
                                            {evt.cover && <div className="absolute inset-0 bg-slate-900/60 backdrop-blur-[2px]"></div>}
                                        </div>

                                        <div className="relative z-10 flex flex-col md:flex-row p-6 gap-6 items-center">
                                            {/* Date Box */}
                                            <div className={`flex-shrink-0 w-20 h-20 rounded-2xl flex flex-col items-center justify-center border ${evt.cover ? 'bg-white/10 border-white/20 text-white' : 'bg-slate-50 border-slate-200 text-slate-800'}`}>
                                                <span className="text-xs font-bold uppercase tracking-widest opacity-70">{evt.month}</span>
                                                <span className="text-3xl font-black">{evt.day}</span>
                                            </div>

                                            {/* Content */}
                                            <div className={`flex-1 text-center md:text-left ${evt.cover ? 'text-white' : 'text-slate-800'}`} onClick={() => handleEventClick(evt)}>
                                                <div className="flex flex-col md:flex-row md:justify-between md:items-start mb-2">
                                                    <h3 className="text-2xl font-bold cursor-pointer hover:underline decoration-2 underline-offset-4">{evt.title}</h3>
                                                    <span className={`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-bold border ${evt.cover ? 'bg-white/20 border-white/30 text-white' : 'bg-amber-50 text-amber-600 border-amber-100'}`}>
                                                        <Icon name="AlertTriangle" size={12}/> faltam {evt.pending} tarefas
                                                    </span>
                                                </div>
                                                <div className={`flex flex-wrap gap-4 text-sm font-medium ${evt.cover ? 'text-white/80' : 'text-slate-500'}`}>
                                                    <span className="flex items-center gap-1"><Icon name="MapPin" size={14}/> {evt.location}</span>
                                                    <span className="flex items-center gap-1"><Icon name="Calendar" size={14}/> {evt.date}</span>
                                                </div>
                                            </div>

                                            {/* Action / Upload */}
                                            <div className="absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity">
                                                <label className="p-2 bg-black/50 hover:bg-black/80 text-white rounded-full cursor-pointer backdrop-blur-sm transition-colors block">
                                                    <Icon name="Camera" size={16}/>
                                                    <input type="file" className="hidden" accept="image/*" onChange={(e) => handleCoverUpload(e, evt.id)} />
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>

                        {/* Modal Member */}
                        {showMemberModal && (
                            <div className="fixed inset-0 z-50 flex items-center justify-center bg-slate-900/60 backdrop-blur-sm animate-fade-in" onClick={() => setShowMemberModal(false)}>
                                <div className="bg-white rounded-2xl w-full max-w-md shadow-2xl p-6" onClick={e => e.stopPropagation()}>
                                    <h3 className="text-lg font-bold text-slate-800 mb-4">{editingMember ? 'Editar Membro' : 'Novo Membro'}</h3>
                                    
                                    <div className="space-y-4">
                                        <div>
                                            <label className="block text-xs font-bold text-slate-500 mb-1">Nome</label>
                                            <input type="text" value={formName} onChange={e => setFormName(e.target.value)} className="w-full p-2 border rounded-lg text-sm" placeholder="Nome completo" />
                                        </div>
                                        <div>
                                            <label className="block text-xs font-bold text-slate-500 mb-1">Cargo</label>
                                            <input type="text" value={formRole} onChange={e => setFormRole(e.target.value)} className="w-full p-2 border rounded-lg text-sm" placeholder="Ex: Designer" />
                                        </div>
                                        <div>
                                            <label className="block text-xs font-bold text-slate-500 mb-2">Avatar</label>
                                            <div className="flex items-center gap-4 mb-3">
                                                <img src={formPhoto} className="w-16 h-16 rounded-full object-cover border-2 border-slate-200" />
                                                <label className="px-3 py-1.5 bg-slate-100 hover:bg-slate-200 rounded-lg text-xs font-bold cursor-pointer text-slate-600">
                                                    Upload Foto
                                                    <input type="file" className="hidden" onChange={e => {
                                                        const file = e.target.files[0];
                                                        if(file) {
                                                            const reader = new FileReader();
                                                            reader.onload = (x) => setFormPhoto(x.target.result);
                                                            reader.readAsDataURL(file);
                                                        }
                                                    }}/>
                                                </label>
                                            </div>
                                            <div className="flex gap-2 overflow-x-auto pb-2">
                                                {PRESET_AVATARS.map((url, i) => (
                                                    <img key={i} src={url} onClick={() => setFormPhoto(url)} className="w-8 h-8 rounded-full cursor-pointer hover:ring-2 ring-brand-blue" />
                                                ))}
                                            </div>
                                        </div>
                                        <button onClick={saveMember} className="w-full bg-brand-navy text-white py-2.5 rounded-xl font-bold text-sm hover:bg-brand-blue transition-colors">
                                            Salvar
                                        </button>
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>
                );
            }

            // 2. EVENTO (DETALHE)
            if (view === 'event' && activeEvent) {
                const data = eventData[activeTab]; 
                
                return (
                    <div className="min-h-screen max-w-[1600px] mx-auto p-6 bg-slate-50">
                        {/* Event Header */}
                        <div className="bg-white rounded-2xl p-6 shadow-soft border border-slate-200 mb-8 flex items-center justify-between">
                            <div className="flex items-center gap-6">
                                <button onClick={() => setView('hub')} className="p-2 hover:bg-slate-100 rounded-full text-slate-500 transition-colors">
                                    <Icon name="ArrowLeft" size={20}/>
                                </button>
                                <div>
                                    <div className="flex items-center gap-3">
                                        <h1 className="text-2xl font-bold text-slate-900">{activeEvent.title}</h1>
                                    </div>
                                </div>
                            </div>
                            <div className="flex gap-4">
                                <div className="flex bg-slate-100 p-1 rounded-lg">
                                    <button onClick={() => setActiveTab('Pré-Evento')} className={`px-4 py-2 rounded-md text-sm font-bold transition-all ${activeTab === 'Pré-Evento' ? 'bg-white text-brand-navy shadow-sm' : 'text-slate-500'}`}>Pré-Evento</button>
                                    <button onClick={() => setActiveTab('Evento')} className={`px-4 py-2 rounded-md text-sm font-bold transition-all ${activeTab === 'Evento' ? 'bg-white text-brand-navy shadow-sm' : 'text-slate-500'}`}>Evento</button>
                                </div>
                            </div>
                        </div>

                        {/* Grid */}
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                            {data && Object.entries(data).map(([catName, catData], idx) => (
                                <CategoryColumn 
                                    key={idx} 
                                    title={catName} 
                                    icon={catData.icon} 
                                    items={catData.items} 
                                    resp={catData.resp} 
                                    onTaskClick={handleTaskClick}
                                />
                            ))}
                        </div>

                        {/* Task Detail Modal */}
                        {selectedTask && (
                            <TaskModal 
                                task={selectedTask} 
                                categoryResp={selectedTaskResp} 
                                onClose={() => setSelectedTask(null)}
                                onUpdate={updateTaskData}
                            />
                        )}
                    </div>
                );
            }

            return null;
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>






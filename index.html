<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event Hub - Painel de Marketing</title>
    
    <!-- Tailwind CSS (Estilos) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonte Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- React & ReactDOM (Motor do Site) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel (Tradutor de Código) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #F8FAFC; }
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        /* Animações Suaves */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in { animation: fadeIn 0.4s ease-out forwards; }
    </style>

    <!-- Configuração de Cores -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        blue: { 900: '#1e3a8a', 950: '#172554' }
                    }
                }
            }
        }
    </script>
</head>
<body>
    <div id="root"></div>

    <!-- CÓDIGO DA APLICAÇÃO -->
    <script type="text/babel" data-type="module">
        import React, { useState, useEffect, useRef } from 'https://esm.sh/react@18.2.0';
        import { createRoot } from 'https://esm.sh/react-dom@18.2.0/client';
        import { 
            Calendar as CalendarIcon, Users, CheckSquare, Flag, Plus, X, Clock, 
            Edit2, Trash2, ChevronLeft, ChevronRight, Truck, ArrowLeft, 
            Search, Bell, MessageSquare, Send, AlertCircle, ChevronDown, 
            ChevronUp, Settings, UserPlus, Box, TrendingUp, Filter, Check, 
            Image as ImageIcon, AlertTriangle, Crown, Plane, Target, Camera,
            Sparkles, Bot, BarChart3, GripVertical, Flame
        } from 'https://esm.sh/lucide-react@0.294.0';

        // --- Firebase Config (Simples para visualização) ---
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js';
        import { getFirestore, collection, onSnapshot, doc, updateDoc, addDoc, deleteDoc } from 'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';
        import { getAuth, signInAnonymously, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';

        const firebaseConfig = {
            apiKey: "AIzaSyCOFpqcXhf-TkL9BLhpKTcMK2MO7G7T2mU",
            authDomain: "bolsas-termicas.firebaseapp.com",
            projectId: "bolsas-termicas",
            storageBucket: "bolsas-termicas.firebasestorage.app",
            messagingSenderId: "372188665466",
            appId: "1:372188665466:web:2a343ec375462f56920dc3"
        };

        // Tenta iniciar Firebase, se falhar usa modo local
        let db, auth;
        let isFirebaseAvailable = false;
        try {
            const app = initializeApp(firebaseConfig);
            db = getFirestore(app);
            auth = getAuth(app);
            isFirebaseAvailable = true;
        } catch (e) { console.log("Modo Offline/Demo"); }

        // --- COMPONENTES VISUAIS ---

        // Avatar Component
        const Avatar = ({ member, size = "w-10 h-10", textSize = "text-xs" }) => {
            if (!member) return <div className={`${size} rounded-full bg-gray-200`}></div>;
            if (member.photoUrl) return <img src={member.photoUrl} className={`${size} rounded-full object-cover border border-gray-200`} />;
            
            // SVGs para avatares executivos (Placeholder)
            const getSvg = (id) => {
                if(id === 'ex1') return <svg viewBox="0 0 100 100" className="w-full h-full"><circle cx="50" cy="50" r="50" fill="#E5E7EB"/><path d="M50 25a20 20 0 1 0 0 40 20 20 0 0 0 0-40zM20 85a30 30 0 0 1 60 0v5H20v-5z" fill="#9CA3AF"/></svg>;
                return <span className="font-bold text-blue-900">{member.name?.substring(0,2)}</span>;
            };

            return (
                <div className={`${size} rounded-full bg-white border border-gray-200 flex items-center justify-center overflow-hidden ${textSize}`}>
                    {member.avatarType === 'executive' ? getSvg(member.avatarContent) : <span>{member.name?.substring(0,2)}</span>}
                </div>
            );
        };

        // Componente Principal
        const App = () => {
            const [view, setView] = useState('dashboard');
            const [selectedEvent, setSelectedEvent] = useState(null);
            
            // Dados Mockados para restaurar o layout imediatamente
            const [members] = useState([
                { id: '1', name: 'Paulo Mokarzel', role: 'Gestor da Equipe', avatarType: 'executive', avatarContent: 'ex1' },
                { id: '2', name: 'Ana Silva', role: 'Gerente de Mkt', avatarType: 'executive', avatarContent: 'ex2' },
                { id: '3', name: 'Beatriz Costa', role: 'Coordenadora', avatarType: 'executive', avatarContent: 'ex3' },
                { id: '4', name: 'João Mendes', role: 'Logística', avatarType: 'executive', avatarContent: 'ex4' },
                { id: '5', name: 'Fernanda Lima', role: 'Social Media', avatarType: 'executive', avatarContent: 'ex5' },
            ]);

            const [events] = useState([
                { id: 'ev1', title: 'Convenção de Vendas', location: 'Auditório Doremus', dateRange: '02/02/2026 - 06/02/2026', pending: 22, daysLeft: 56 },
                { id: 'ev2', title: 'Nis Nutri', location: 'Transamerica Expo Center', dateRange: '31/03/2026 - 01/04/2026', pending: 15, daysLeft: 113 },
                { id: 'ev3', title: 'Jornada Técnica', location: 'Hotel', dateRange: '01/05/2026', pending: 10, daysLeft: 144 },
            ]);

            const updates = [
                { user: 'Felipe', action: 'comentou em', target: 'Fispal Sorvetes', text: 'sijda', date: '04/12/2025' },
                { user: 'Matheus', action: 'alterou status', target: 'Fispal Sorvetes', text: 'Gráfica colocou a previsão para dia 23/05.', date: '27/11/2025' },
                { user: 'Larissa', action: 'concluiu', target: 'Fispal Sorvetes', text: 'Produtos definidos e produzidos.', date: '27/11/2025' }
            ];

            const [logo, setLogo] = useState(null);

            // Auth Anônima para Firebase (se disponível)
            useEffect(() => {
                if (isFirebaseAvailable) signInAnonymously(auth).catch(() => {});
            }, []);

            // --- VIEW: DASHBOARD (A tela que você quer) ---
            const Dashboard = () => (
                <div className="max-w-[1600px] mx-auto animate-fade-in">
                    <div className="grid grid-cols-1 xl:grid-cols-4 gap-8">
                        {/* Coluna Principal */}
                        <div className="xl:col-span-3 space-y-8">
                            
                            {/* Cards Topo */}
                            <section className="grid grid-cols-1 md:grid-cols-2 gap-8">
                                {/* Status Global */}
                                <div className="bg-white rounded-[2rem] p-8 shadow-sm border border-gray-100 flex items-center justify-between relative overflow-hidden">
                                    <div className="relative w-32 h-32 flex-shrink-0">
                                        <svg className="w-full h-full transform -rotate-90">
                                            <circle cx="64" cy="64" r="56" stroke="#F3F4F6" strokeWidth="12" fill="transparent" />
                                            <circle cx="64" cy="64" r="56" stroke="#002060" strokeWidth="12" fill="transparent" strokeDasharray="351.86" strokeDashoffset="351.86" strokeLinecap="round" />
                                        </svg>
                                        <div className="absolute inset-0 flex flex-col items-center justify-center text-gray-800">
                                            <span className="text-3xl font-extrabold text-[#002060]">0%</span>
                                        </div>
                                    </div>
                                    <div className="flex-1 ml-8 z-10">
                                        <h3 className="text-lg font-bold text-gray-900 mb-4">Status Global</h3>
                                        <div className="flex items-center gap-6 text-sm font-semibold">
                                            <span className="text-emerald-600 flex items-center gap-2"><div className="w-2.5 h-2.5 rounded-full bg-emerald-500"></div> 0 Feitas</span>
                                            <span className="text-amber-600 flex items-center gap-2"><div className="w-2.5 h-2.5 rounded-full bg-amber-500"></div> 176 Pend.</span>
                                        </div>
                                    </div>
                                </div>

                                {/* Carga de Trabalho */}
                                <div className="bg-white rounded-[2rem] p-8 shadow-sm border border-gray-100 flex flex-col justify-center">
                                    <h3 className="text-sm font-bold text-gray-900 mb-6 flex items-center gap-2">
                                        <Users size={18} /> Carga de Trabalho
                                    </h3>
                                    <div className="flex items-end gap-6 overflow-x-auto pb-2 hide-scrollbar">
                                        {members.map((m, i) => (
                                            <div key={m.id} className="flex flex-col items-center gap-2 min-w-[50px]">
                                                <div className="w-10 h-1 bg-gray-100 rounded-full overflow-hidden mb-1">
                                                    <div className="h-full bg-blue-600 rounded-full" style={{ width: i < 3 ? '60%' : '0%' }}></div>
                                                </div>
                                                <Avatar member={m} />
                                                <span className={`text-xs font-bold ${i < 3 ? 'text-blue-600' : 'text-blue-900'}`}>{i < 3 ? 1 : 0}</span>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </section>

                            {/* Lista de Eventos */}
                            <section>
                                <h2 className="text-lg font-bold text-blue-900 mb-6 flex items-center gap-2">
                                    <Clock size={20} /> Próximos Eventos
                                </h2>
                                <div className="space-y-4">
                                    {events.map(event => (
                                        <div key={event.id} onClick={() => { setSelectedEvent(event); setView('event'); }} className="bg-white rounded-[1.5rem] p-6 border border-gray-100 shadow-sm hover:shadow-md hover:border-blue-200 transition-all cursor-pointer flex flex-col md:flex-row items-center gap-6 group">
                                            <div className="flex-shrink-0 w-20 h-20 bg-gray-50 rounded-2xl flex flex-col items-center justify-center border border-gray-100 group-hover:bg-blue-50 transition-colors">
                                                <span className="text-[10px] font-bold text-gray-500 uppercase">DEZ</span>
                                                <span className="text-3xl font-extrabold text-gray-800 group-hover:text-blue-900">02</span>
                                            </div>
                                            <div className="flex-1 w-full">
                                                <div className="flex justify-between items-center mb-1">
                                                    <h3 className="text-xl font-bold text-blue-900 group-hover:text-blue-700">{event.title}</h3>
                                                    <span className="text-[10px] font-bold text-amber-600 bg-amber-50 border border-amber-200 px-3 py-1 rounded-full flex gap-1 items-center">
                                                        <AlertTriangle size={10} /> faltam {event.pending} tarefas
                                                    </span>
                                                </div>
                                                <div className="text-sm text-gray-500 space-y-1">
                                                    <p className="flex items-center gap-2 text-xs"><div className="w-1.5 h-1.5 rounded-full bg-gray-400"></div> {event.location}</p>
                                                    <div className="flex items-center gap-3 mt-2">
                                                        <span className="text-blue-600 font-bold text-xs bg-blue-50 px-2 py-0.5 rounded">{event.dateRange}</span>
                                                        <span className="bg-emerald-100 text-emerald-700 px-2 py-0.5 rounded text-xs font-bold">Faltam {event.daysLeft} dias</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </section>
                        </div>

                        {/* Sidebar Direita - Atualizações */}
                        <div className="xl:col-span-1">
                            <section className="bg-white rounded-[2rem] p-6 shadow-sm border border-gray-100 h-full">
                                <h2 className="text-lg font-bold text-blue-900 mb-6 flex items-center gap-2"><MessageSquare size={20} /> Atualizações</h2>
                                <div className="space-y-6 relative before:absolute before:left-4 before:top-2 before:bottom-2 before:w-px before:bg-gray-100">
                                    {updates.map((u, i) => (
                                        <div key={i} className="relative pl-10">
                                            <div className="absolute left-0 top-0 w-8 h-8 rounded-full border-2 border-white shadow-sm z-10 bg-gray-200 overflow-hidden">
                                                <span className="flex w-full h-full items-center justify-center text-[10px] font-bold">{u.user[0]}</span>
                                            </div>
                                            <div className="flex flex-col gap-1">
                                                <p className="text-xs text-gray-500"><span className="font-bold text-gray-800">{u.user}</span> <span className="text-gray-400">{u.date}</span></p>
                                                <p className="text-[10px] text-blue-500 font-medium">{u.target}</p>
                                                <div className="p-3 bg-gray-50 rounded-xl rounded-tl-none text-xs text-gray-600 border border-gray-100">{u.text}</div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </section>
                        </div>
                    </div>
                </div>
            );

            // --- RENDERIZAÇÃO PRINCIPAL ---
            return (
                <div className="min-h-screen bg-[#F8FAFC] pb-12">
                    {/* Header Fixo */}
                    <header className="fixed top-0 left-0 right-0 bg-white border-b border-gray-100 z-50 h-20 px-8 flex items-center justify-between shadow-sm">
                        <div className="flex items-center gap-6 cursor-pointer" onClick={() => setView('dashboard')}>
                            <div className="h-10 w-32 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center text-xs text-gray-400 font-medium hover:border-blue-400 hover:text-blue-500 transition-colors">
                                {logo ? <img src={logo} className="h-full object-contain"/> : "Sua Logo"}
                                <input type="file" className="absolute inset-0 opacity-0 cursor-pointer" onChange={(e) => {
                                    const file = e.target.files[0];
                                    if(file) {
                                        const reader = new FileReader();
                                        reader.onload = (ev) => setLogo(ev.target.result);
                                        reader.readAsDataURL(file);
                                    }
                                }}/>
                            </div>
                            <div className="h-8 w-px bg-gray-200"></div>
                            <div>
                                <h1 className="text-xl font-extrabold text-[#002060]">Event Hub</h1>
                                <p className="text-xs text-gray-500 font-medium">Painel de Marketing</p>
                            </div>
                        </div>

                        <div className="flex items-center gap-4">
                            <div className="hidden md:flex items-center gap-3 pr-6 border-r border-gray-100">
                                <Avatar member={members[0]} />
                                <div className="text-right">
                                    <p className="text-[10px] font-bold text-gray-400 uppercase">Gestor</p>
                                    <p className="text-sm font-bold text-gray-800">{members[0].name}</p>
                                </div>
                            </div>
                            <button className="p-2 hover:bg-gray-100 rounded-xl text-gray-500"><Bell size={20}/></button>
                            <button className="p-2 hover:bg-gray-100 rounded-xl text-gray-500"><Settings size={20}/></button>
                            <button className="bg-[#1e1b4b] text-white px-5 py-2.5 rounded-xl font-bold flex items-center gap-2 hover:bg-blue-900 transition-colors shadow-lg shadow-blue-900/20">
                                <Plus size={18} /> Novo Evento
                            </button>
                        </div>
                    </header>

                    {/* Conteúdo */}
                    <main className="pt-28 px-8">
                        {view === 'dashboard' ? <Dashboard /> : (
                            <div className="text-center py-20 animate-fade-in">
                                <button onClick={() => setView('dashboard')} className="mb-4 text-blue-600 hover:underline flex items-center justify-center gap-2 mx-auto"><ArrowLeft size={16}/> Voltar</button>
                                <h2 className="text-2xl font-bold text-gray-800">Detalhes do Evento: {selectedEvent?.title}</h2>
                                <p className="text-gray-500">Funcionalidade completa disponível no modo detalhado.</p>
                            </div>
                        )}
                    </main>
                </div>
            );
        };

        const root = createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>





